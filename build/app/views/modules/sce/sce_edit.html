<div id="Panel">
    <div class="panel_content panel_action_bar">
        <form id="sce-edit" kendo-validator="validators.editSceForm" k-options="updateForm_CustomValidationOptions">
            <!-- Floating Process Flow -->
            <div class="process_flow affix_top box_shadow" data-offset="98">
                <h5>Process Flow</h5>
                <ul class="flow_step">
                    <li class="current">
                        <p>Application</p>
                    </li>
                    <li>
                        <p>Review</p>
                    </li>
                    <li>
                        <p>Endorsement</p>
                    </li>
                    <li>
                        <p>Approval</p>
                    </li>
                    <li>
                        <p>Acknowledgment</p>
                    </li>
                    <li>
                        <p>Live</p>
                    </li>
                </ul>
            </div>
            <!-- End Floating Process Flow -->
            <!-- Form Box -->
            <div class="col-left form_block box_shadow">
                <h3 class="flow_title">Application</h3>
                <fieldset>
                    <h4 class="group_title">Requisition</h4>
                    <div class="applicant_details block_group">
                        <div class="row">
                            <div class="col-xs-5">
                                <h5 class="lbl">Applicant</h5>
                                <p><strong data-ng-bind="userProfile.userName"></strong><br><span data-ng-bind="userProfile.staffNo"></span></p>
                            </div>
                            <div class="col-xs-2">
                                <h5 class="lbl">Dept</h5>
                                <p data-ng-bind="userProfile.dept"></p>
                            </div>
                            <div class="col-xs-3">
                                <h5 class="lbl">Office Telephone</h5>
                                <p data-ng-bind="userProfile.contactNo"></p>
                            </div>
                            <div class="col-xs-2">
                                <h5 class="lbl">Mobile No.</h5>
                                <input id="mobileNo" name="mobileNo" type="text" class="txt k-textbox" data-ng-model="sceDetail.mobileNo" maxlength="50"
                                      data-maxlength-msg="Max length is 50" action-valid-required="Submit" data-required-msg="Mobile No. is required" pattern="^\s*(?:\+?(\d{1,3}))?[-. (]*(\d{3})[-. )]*(\d{3})[-. ]*(\d{4})(?: *x(\d+))?\s*$" validationMessage="Please enter a ten digit phone number" />
                                <span class="k-invalid-msg" data-for="mobileNo"></span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-5">
                                <div class="form-group">
                                    <label for="Radio">Radio <span class="opt">(optional)</span></label>
                                    <input id="Radio" name="Radio" type="text" class="txt k-textbox" data-ng-model="sceDetail.radio" maxlength="50" />
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="block_group">
                        <div class="row">
                            <div class="col-xs-5">
                                <label for="sceArea">Area</label>
                                <select kendo-drop-down-list
                                        id="sceArea"
                                        class="txt"
                                        name="area"
                                        required
                                        data-required-msg="Area is required"
                                        k-option-label="'Select area ...'"
                                        k-data-text-field="'description'"
                                        k-data-value-field="'lookupAreaId'"
                                        k-ng-model="selectedArea"
                                        k-data-source="areasDataSource"
                                        k-on-change="onAreaChange()"
                                        k-filter="'contains'"
                                        k-value-primitive="true"></select>
                                <span class="k-invalid-msg" data-for="area"></span>
                            </div>
                            <div class="col-xs-5">
                                <div class="form-group">
                                    <label for="UnitNo">Unit No.</label>
                                    <input kendo-drop-down-list
                                           id="UnitNo"
                                           class="txt"
                                           name="unitNo"
                                           required
                                           data-required-msg="Unit No is required"
                                           k-option-label="'Select UnitNo ...'"
                                           k-data-text-field="'description'"
                                           k-data-value-field="'lookupUnitId'"
                                           k-data-source="unitDataSource"
                                           k-ng-model="selectedUnitNo"
                                           k-on-change="onUnitChange()"
                                           k-filter="'contains'"
                                           k-value-primitive="true" />
                                    <span class="k-invalid-msg" data-for="unitNo"></span>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-5">
                                <div class="form-group">
                                    <label for="TagNo">Tag No.</label>
                                    <input kendo-drop-down-list
                                           id="TagNo"
                                           class="txt"
                                           name="tagNo"
                                           data-required-msg="Tag No. is required"
                                           k-option-label="'Select TagNo. ...'"
                                           k-data-text-field="'description'"
                                           k-data-value-field="'lookupTagId'"
                                           k-ng-model="selectedTagNo"
                                           k-data-source="tagNoDataSource"
                                           k-on-change="onTagNoChange()"
                                           k-filter="'contains'"
                                           k-value-primitive="true" />
                                </div>
                                <div class="form-group">
                                    <input type="text" id="otherTagNo" name="tagNo" class="txt k-textbox" data-ng-model="sceDetail.otherTagNo" maxlength="250" data-ng-hide="selectedTagNo != '0'" data-ng-show="selectedTagNo == '0'" />
                                </div>
                                <span class="k-invalid-msg" data-for="tagNo"></span>
                            </div>
                            <div class="col-xs-5">
                                <div class="form-group">
                                    <label for="EquipmentNo">Equipment No.</label>
                                    <input id="EquipmentNo" name="equipmentNo" action-valid-required="Submit" data-required-msg="Equipment No. is required" type="text" class="txt k-textbox" data-ng-model="sceDetail.equipmentNo" maxlength="300" />
                                    <span class="k-invalid-msg" data-for="equipmentNo"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="block_group">
                        <div class="row">
                            <div class="col-xs-12">
                                <h5 class="lbl">Category</h5>
                                <div class="cb" data-ng-init="$parent.selectedCategory = categoryDataSource[0].lookupSceCatId" data-ng-repeat="category in categoryDataSource">
                                    <input type="radio" name="category" action-valid-required="Submit" data-required-msg="Category is required" id="{{category.lookupSceCatId}}" class="k-radio" data-ng-model="$parent.selectedCategory" data-ng-value="category.lookupSceCatId" />
                                    <label class="k-radio-label" for="{{category.lookupSceCatId}}" data-ng-bind="category.description"></label>
                                </div>
                                <span class="k-invalid-msg" data-for="category"></span>
                            </div>
                        </div>
                    </div>
                    <div class="block_group">
                        <div class="row">
                            <div class="col-xs-5">
                                <div class="form-group form_loading">
                                    <label>Type of SCE Bypass</label>
                                    <select kendo-drop-down-list
                                            id="parentType"
                                            class="txt"
                                            name="TypeofBypass"
                                            k-option-label="'Select SCE Bypass Type ...'"
                                            k-data-text-field="'description'"
                                            k-data-value-field="'lookupTypeSceBypassId'"
                                            k-data-source="bypassTypesDataSource"
                                            k-on-change="onSelectedChange(kendoEvent)"
                                            k-ng-model="selectedParentType"
                                            k-filter="'contains'"
                                            k-value-primitive="true"></select>
                                </div>
                                <div class="form-group">
                                    <select kendo-drop-down-list
                                            id="childType"
                                            class="txt"
                                            name="TypeofBypass"
                                            data-ng-hide="selectedParentType == '' || selectedParentType == '0'"
                                            k-option-label="'Select child Type ...'"
                                            k-data-text-field="'description'"
                                            k-data-value-field="'lookupTypeSceBypassId'"
                                            k-data-source="bypassChildTypesDataSource"
                                            k-ng-model="selectedType"
                                            k-value-primitive="true"
                                            k-filter="'contains'"
                                            disabled="disabled"></select>
                                </div>
                                <div class="form-group">
                                    <input type="text" id="otherType" name="TypeofBypass" class="txt k-textbox" data-ng-model="sceDetail.othersTypesOfByPass" maxlength="300" data-ng-hide="selectedParentType != '0'" data-ng-show="selectedParentType == '0'" />
                                </div>
                                <span class="k-invalid-msg" data-for="TypeofBypass"></span>
                            </div>
                        </div>
                    </div>
                    <div class="block_group">
                        <div class="row">
                            <div class="col-xs-5">
                                <div class="form-group">
                                    <label>Estimated Duration for Bypass <span class="opt">(optional)</span></label>
                                    <input kendo-numeric-text-box k-options="numberTextbox" name="EstimationDurationForByPass" step="0.25" class="txt k-textbox txt_shorter" data-ng-model="sceDetail.estimationDurationForByPass" />  <span class="form_suffix_text">days</span>
                                </div>
                            </div>
                            <div class="col-xs-5">
                                <div class="form-group">
                                    <label for="SIL">Safety Integrity Level</label>
                                    <select kendo-drop-down-list
                                            id="SIL"
                                            class="txt txt_short"
                                            name="safetyIntegrityLevel"
                                            action-valid-required="Submit"
                                            data-required-msg="Safety Integrity Level is required"
                                            k-option-label="'Select SIL ...'"
                                            k-data-text-field="'description'"
                                            k-data-value-field="'lookupSilId'"
                                            k-data-source="silDataSource"
                                            k-ng-model="selectedSILType"
                                            k-filter="'contains'"
                                            k-value-primitive="true"></select>
                                    <br>
                                    <span class="k-invalid-msg" data-for="safetyIntegrityLevel"></span>
                                    <p>
                                        <a class="form_helper_link" href="#" data-ng-click="loaDialog.open()">View LOA table</a><br />
                                        <span class="form_helper_text">Instrumented system only</span>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </fieldset>
                <fieldset>
                    <h4 class="group_title">Work Description</h4>
                    <div class="block_group">
                        <div class="row">
                            <div class="col-xs-5">
                                <div class="form-group">
                                    <label>Date Required</label>
                                    <input kendo-date-picker k-options="dateTextbox" name="dateRequired" action-valid-required="Submit" data-required-msg="Date Required is required" class="datepicker txt" data-ng-model="sceDetail.dateRequired" pattern="^(((0?[1-9]|1[012])/(0?[1-9]|1\d|2[0-8])|(0?[13456789]|1[012])/(29|30)|(0?[13578]|1[02])/31)/(19|[2-9]\d)\d{2}|0?2/29/((19|[2-9]\d)(0[48]|[2468][048]|[13579][26])|(([2468][048]|[3579][26])00)))$" />
                                    <span class="k-invalid-msg" data-for="dateRequired"></span>
                                </div>
                            </div>
                            <div class="col-xs-5">
                                <div class="form-group">
                                    <label>Expected Date to Normalize <span class="opt">(optional)</span></label>
                                    <input kendo-date-picker k-options="dateTextbox" name="Expected Date to Normalize" class="datepicker txt" greaterdate data-commpare-control="dateRequired" data-ng-model="sceDetail.expectedDateToNormalize" pattern="^(((0?[1-9]|1[012])/(0?[1-9]|1\d|2[0-8])|(0?[13456789]|1[012])/(29|30)|(0?[13578]|1[02])/31)/(19|[2-9]\d)\d{2}|0?2/29/((19|[2-9]\d)(0[48]|[2468][048]|[13579][26])|(([2468][048]|[3579][26])00)))$" />
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-10">
                                <div class="form-group">
                                    <label>Reason for Conducting Bypass</label>
                                    <textarea rows="5" name="reasonForConductingBypass" class="txt k-textbox k-editor-textarea" data-ng-model="sceDetail.reasonForConductingByPass" action-valid-required="Submit" data-required-msg="Reason for Conducting Bypass is required" maxlength="500"></textarea>
                                    <span class="k-invalid-msg" data-for="reasonForConductingBypass"></span>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-10">
                                <div class="form-group">
                                    <label>Precautions by Applicant</label>
                                    <textarea rows="5" name="precautionsByApplicant" class="txt k-textbox k-editor-textarea" data-ng-model="sceDetail.precautionsByApplicant" action-valid-required="Submit" data-required-msg="Precautions by Applicant is required" maxlength="2000"></textarea>
                                    <span class="k-invalid-msg" data-for="precautionsByApplicant"></span>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-5">
                                <div class="form-group">
                                    <label>Method of Bypass</label>
                                    <select kendo-drop-down-list
                                            id="methodBypass"
                                            class="txt"
                                            name="MethodsofBypass"
                                            k-option-label="'Select method ...'"
                                            k-data-text-field="'description'"
                                            k-data-value-field="'lookupMethodOfByPassId'"
                                            k-data-source="methodsDataSource"
                                            k-ng-model="selectedMethod"
                                            k-on-change="onSelectedMethodChange(kendoEvent)"
                                            k-filter="'contains'"
                                            k-value-primitive="true"></select>
                                </div>
                                <div class="form-group">
                                    <input type="text" id="otherMethod" name="MethodsofBypass" class="txt k-textbox" data-ng-hide="selectedMethod != '0'" data-ng-show="selectedMethod == '0'" data-ng-model="sceDetail.othersMethodOfByPass" maxlength="300" />
                                </div>
                                <span class="k-invalid-msg" data-for="MethodsofBypass"></span>
                            </div>
                        </div>
                    </div>
                    <div class="block_group">
                        <div class="row">
                            <div class="col-xs-10">
                                <div class="form-group">
                                    <label>Reviewer</label>
                                    <select kendo-drop-down-list
                                            id="sce-reviewer"
                                            class="txt"
                                            name="reviewer"
                                            action-valid-required="Submit"
                                            data-required-msg="Reviewer is required"
                                            k-data-text-field="'userName'"
                                            k-data-value-field="'userProfileId'"
                                            k-options="reviewerOptions"
                                            k-ng-model="selectedReviewer"></select>
                                    <span class="k-invalid-msg" data-for="reviewer"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </fieldset>
            </div>
            <div class="action_bar cf">
                <div class="action_status">
                    <h4 data-ng-bind="sceDetail.status"></h4>
                </div>
                <div class="action_applicant">
                    <h6>Applicant</h6>
                    <p><strong data-ng-bind="userProfile.userName"></strong><br><span data-ng-bind="userProfile.staffNo"></span></p>
                </div>
                <div class="action_button" data-ng-show="((isApplicant && hasApplicantRole) || isAdmin)">
                    <button class="btn btn-sd btn-sd-ghost k-button" data-ng-show="sceDetail.statusKey != '10' && sceDetail.statusKey != '7'" type="button" data-ng-click="cancelSce($event)" data-ng-disabled="inProgress">Cancel SCE</button>
                    <button class="btn btn-sd btn-sd-ghost k-button" type="button" data-ng-click="edit($event, 'Draft')" data-ng-disabled="inProgress">Save Draft</button>
                    <button class="btn btn-sd btn-sd-ghost k-button" type="button" data-ng-click="edit($event, 'Submit')" data-ng-disabled="inProgress">Submit</button>
                </div>
            </div>
            <div kendo-dialog="loaDialog" k-title="'PP(M)SB SCE Bypass Level of Authority'" k-on-open="dialogVisible = true"
                 k-on-close="dialogVisible = false" k-width="650" k-height="480" k-modal="true" k-visible="false">
                <img alt="loa" src="/content/images/loa.png" />
            </div>
        </form>
    </div>
</div>